(this["webpackJsonpsample-gator-example"]=this["webpackJsonpsample-gator-example"]||[]).push([[0],{36:function(e,t,n){e.exports=n(63)},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(3),o=n.n(a),s=(n(41),n(42),n(43),n(4)),c=n(13);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=function(e,t,n,r){var i=e.availableLength||0,a=Math.min(i,n),o={},s=e.track,c=e.field;return s.lifo((function(e){o.current=s.array[e.index][c],"undefined"!==typeof o.current&&("undefined"===typeof o.best||o.current<o.best)&&(o.best=o.current)}),r||0,a),o.best},m=function(e,t,n,r){var i=e.availableLength||0,a=Math.min(i,n),o={},s=e.track,c=e.field;return s.lifo((function(e){o.current=s.array[e.index][c],"undefined"!==typeof o.current&&("undefined"===typeof o.best||o.current>o.best)&&(o.best=o.current)}),r||0,a),o.best},p=function(e,t,n,r){var i=e.availableLength||0,a=Math.min(i,n),o=0,s=0,c=e.track,u=e.field;if(c.lifo((function(e){o+=c.array[e.index][u],s++}),r||0,a),0!==s)return o/s},d=function(e,t,n,r,i){var a=e.availableLength||0,o=Math.min(a,n),s=e.track,c=e.field;s.lifo((function(e){i(e,s.array[e.index][c])}),r||0,o)},v=function(e,t,n,r){var i=e.mean(n,r),a=0,o=0;if(e.fn(n,r||0,(function(e,t){a+=Math.pow(t-i,2),o++})),0!==o)return Math.sqrt(a/o)};function y(e,t,n){return function(r,i){if(void 0===i&&(i=0),i>0)throw new Error("offset must be negative");return n(e,t,r,i)}}var g=function(){function e(e){var t=this;this.track=e.track,this.field=e.field,this.min=y(this,e,h),this.max=y(this,e,m),this.mean=y(this,e,p),this.fn=function(e,t,n){return function(r,i,a){if(void 0===i&&(i=0),i>0)throw new Error("offset must be negative");return n(e,t,r,i,a)}}(this,e,d),this.stDev=y(this,e,v),this.value=function(e){if(void 0===e&&(e=0),0!==t.getOffsetAdjAvailableLength(e))return t.track.get(e)[t.field]}}return e.prototype.getOffsetAdjAvailableLength=function(e){return Math.max(0,Math.min(this.track.array.length,this.track.counter+1)-Math.abs(e))},e.createSerie=function(t,n){return new e({field:t,track:n})},f(e,[{key:"availableLength",get:function(){return this.getOffsetAdjAvailableLength(0)}}]),e}();function b(e){var t=[].concat(e.sampler.fields.publicKeys,e.sampler.fields.expressionKeys);e.serieInstances={};var n={};t.forEach((function(t){n[t]=function(){return e.serieInstances[t]||(e.serieInstances[t]=g.createSerie(t,e)),e.serieInstances[t]}}));var r={get:function(e,t,n){try{return e[t]()}catch(r){throw new Error("Tried to access a non-existent Serie: '"+t+"'")}}};e.series=new Proxy(n,r)}function k(e,t){var n=e.sampler.getSampleTime(t[e.sampler.timeKey]);if(e.lastPeriodTime){if(e.sampler.newSamplePredicate(e.current,t,n,e.lastPeriodTime)){if(function(e,t){if(e.counter+1===e.length)return!0;var n=t||e.current[e.sampler.timeKey]+e.sampler.interval;if(e.sampler.interval>0&&n-e.lastPeriodTime>e.sampler.interval){if(function(e,t,n){if(e.sampler.interval>0&&e.lastPeriodTime){var r=(t-e.lastPeriodTime)/e.sampler.interval-1;if(r>0)for(var i=0;i<r;i++){var a=e.lastPeriodTime+e.sampler.interval;if(x(e),Object.assign(e.array[e.cursor],e.sampler.blank),e.array[e.cursor][e.sampler.timeKey]=a,e.sampler.ffill(e),e.lastPeriodTime=a,n&&e.counter+1===e.length)return!0}}return!1}(e,n,e.length))return!0}return x(e),Object.assign(e.array[e.cursor],e.sampler.blank),e.array[e.cursor][e.sampler.timeKey]=n,e.lastPeriodTime=n,!1}(e,n))return!1}}else e.lastPeriodTime=n;return e.sampler.collect(e,e.current,t,n),!0}function x(e){e.counter++,e.cursor++,e.cursor===e.array.length&&(e.cursor=0)}var w=function(){function e(e,t){this.key="",this.tags={},this.array=[],this.cursor=0,this.counter=0,this.lastPeriodTime=0,this.serieInstances={},this.series={};var n={length:e};this.sampler=t,this.array=Array.from(n).map(this.sampler.createSample),this.cursor=e?0:-1,b(this)}var t=e.prototype;return t.preload=function(e){return k(this,e)},t.capture=function(e){!function(e,t){var n=e.sampler.getSampleTime(t[e.sampler.timeKey]);e.lastPeriodTime||(e.lastPeriodTime=n),e.sampler.collect(e,e.current,t,n),e.onUpdate&&e.onUpdate()}(this,e)},t.lifo=function(e,t,n){void 0===n&&(n=-1);for(var r=Math.abs(t||0),i=n>=0?Math.abs(n):0,a=this.array.length-r,o={index:this.cursor-r,relative:0,ordinal:0},s=this.array.length;s--&&!(r&&o.ordinal>=a)&&!(n>=0&&o.ordinal>=i);)o.index<0&&(o.index=this.array.length-1),e(o,this.array),o.ordinal++,o.index--,o.relative--},t.fifo=function(e,t){void 0===t&&(t=-1);for(var n=this.array.length,r=t>=0?t:n,i={index:0,relative:-(n-1),ordinal:0},a=n;a--&&r--;)i.index=(n+this.cursor-a)%n,e(i,this.array),i.ordinal++,i.relative++},t.get=function(e){return void 0===e&&(e=0),this.array[this.getIndex(e)]},t.getIndex=function(e){void 0===e&&(e=0);var t=this.cursor+e;if(e>0)return t%this.array.length;for(;t<0;)t=this.array.length+t;return t},f(e,[{key:"length",get:function(){return this.array.length}},{key:"current",get:function(){return this.array[this.cursor]}}]),e}();function E(e,t,n){e.keys.push(t),"_"===t[0]&&"_"!==t[1]?(e.hidden[t]=!0,e.hiddenKeys.push(t)):e.publicKeys.push(t),"function"===typeof n?e.fn[t]=n:"object"===typeof n?(n.cumulative&&(e.cumulative[t]=!0),e.fn[t]=n.fn,e.fill[t]=n.fill):e.fn[t]=function(){return n}}function K(e,t){var n={keys:[],publicKeys:[],hiddenKeys:[],expressionKeys:[],ffills:[],hidden:{},cumulative:{},fn:{},fill:{}};return Array.isArray(e.fields)?function(e,t){t.fields.forEach((function(t){switch(typeof t){case"string":E(e,t,(function(e){return e[t]}));break;default:E(e,t.name,t)}}))}(n,e):function(e,t){Object.entries(t.fields).forEach((function(t){var n=t[0],r=t[1];E(e,n,r)}))}(n,e),t.forEach((function(e){n.expressionKeys.push(e.name)})),n}function T(e){var t={__count:0};return e.publicKeys.forEach((function(e){t[e]=void 0})),e.expressionKeys.forEach((function(e){t[e]=void 0})),function(){return l({},t)}}var O=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"===typeof e?e.apply(void 0,n):e};function j(e){var t=K(e,[]),n={addExpression:function(e,t){if(n.expressionDict[e])throw new Error("A field with the name '"+e+"' already exists.");n.expressionDict[e]=t,n.expressions.push({name:e,expression:t}),r()},blank:{},bufferLength:e.bufferLength,collect:function(e,t,n,r){return o(t,n),a(t,e),!0},createSample:T(t),cumulatives:[],expressionDict:{},expressions:[],ffill:function(e){n.fields.ffills.forEach((function(t){var n=t.fn||function(e){return e[t.key]};e.current[t.key]=n(e.get(-1),e)})),a(e.current,e),e.current.__count=-1},fields:t,getSampleTime:i,interval:e.interval||0,newSamplePredicate:function(e,t,r,i){return 0===n.interval||r-i>=n.interval},series:{},suppressAutoSampling:e.suppressAutoSampling,timeKey:O(e.timeKey)||"time",trackKeys:e.trackKeys||[],tracks:[]},r=function(){n.fields=K(e,n.expressions),n.createSample=T(n.fields),n.cumulatives=n.fields.keys.filter((function(e){return n.fields.cumulative[e]}));var t=n.createSample();n.blank=function(e,t){var n=l({},e);return t.forEach((function(e){return delete n[e]})),n}(t,n.cumulatives),n.tracks.forEach((function(e){return b(e)}));var r=[].concat(n.fields.hiddenKeys,n.fields.publicKeys).filter((function(e){return e!==n.timeKey}));n.fields.ffills=r.map((function(e){return{key:e,fn:n.fields.fill[e]||function(t){return t[e]}}}))};function i(e){return n.interval?e-e%n.interval:e}function a(e,t){n.expressions.forEach((function(n){var r=n.expression(t.series);"undefined"!==typeof r&&(e[n.name]=r)}))}function o(e,t,r){n.fields.hiddenKeys.forEach((function(r){n.fields.fn[r](t,e)})),n.fields.publicKeys.forEach((function(r){if(r===n.timeKey)e[n.timeKey]||(e[n.timeKey]=i(t[r]));else{var a=n.fields.fn[r](t,e);"undefined"!==typeof a&&(e[r]=a)}})),e.__count++}return r(),n}function S(e,t){return"undefined"!==typeof e?e:t}var M=function(){function e(e){this.tracks={},this.sampling=!1,this.sampler=j(e)}var t=e.prototype;return t.addExpression=function(e,t){this.sampler.addExpression(e,t)},t.getTracks=function(e){return Object.entries(this.tracks).filter((function(t){return(e||function(){return!0})(t[0],t[1])})).map((function(e){return e[1]}))},t.startSampling=function(){var e=this;if(!this.sampling){var t=this,n=function(e){var t=Object.keys(e.tracks);if(t.length)return e.tracks[t[0]].current[e.sampler.timeKey]}(this),r=(new Date).getTime(),i=n||r-r%this.sampler.interval;this.timer=setInterval((function(){i+=e.sampler.interval,t.sampler.tracks.forEach((function(e){var t,n;n=i,0===(t=e).current.__count&&t.sampler.ffill(t),x(t),Object.assign(t.array[t.cursor],t.sampler.blank),t.array[t.cursor][t.sampler.timeKey]=n,t.lastPeriodTime=n})),t.onInterval&&t.onInterval()}),this.sampler.interval),this.sampling=!0}},t.stopSampling=function(){this.sampling&&(clearInterval(this.timer),this.sampling=!1)},t.preload=function(e){var t=this.getOrCreateTrack(e).preload(e);return t||this.onLoad&&this.onLoad(),t},t.capture=function(e,t){this.getOrCreateTrack(e).capture(e)},t.getOrCreateTrack=function(e){var t=this.sampler,n=t.trackKeys.map((function(t){return S(e[t],"")})).join(".");if(!this.tracks[n]){var r=new w(t.bufferLength,t);t.trackKeys.forEach((function(t){return r.tags[t]=e[t]})),r.key=n,this.tracks[n]=r,t.tracks.push(r),this.onTrackStart&&this.onTrackStart(r)}return this.tracks[n]},e}(),L=(Math.min,Math.max,Math.abs,M),I=n(30),P=n(28),A={time:{fn:function(e){return e.time}},price:{fn:function(e){return e.price}},qty:{fn:function(e){return e.qty},fill:function(){return 0}},exch:{fn:function(e){return e.exch},fill:function(e){return e.exch}},open:{fn:function(e,t){return S(t.open,e.price)},fill:function(e){return e.close}},high:{fn:function(e,t){return Math.max(e.price,S(t.high,e.price))},fill:function(e){return e.close}},low:{fn:function(e,t){return Math.min(e.price,S(t.low,e.price))},fill:function(e){return e.close}},close:{fn:function(e,t){return e.price}}},D=["exch"],_={sma3:function(e){return e.close.mean(3)},sma5:function(e){return e.close.mean(5)},sma8:function(e){return e.close.mean(8)},sma10:function(e){return e.close.mean(10)},ema10:function(e){var t="ema".concat(10),n=e.close,r=e[t];if(!(r.availableLength<11)){var i=r.value(-1);i||(i=n.mean(10,-1));return n.value()*(2/11)+i*(1-2/11)}},cross:function(e){return e.ema10.value(0)>e.sma10.value(0)&&e.ema10.value(-1)<e.sma10.value(-1)?1:e.ema10.value(0)<e.sma10.value(0)&&e.ema10.value(-1)>e.sma10.value(-1)?-1:void 0}},U=new P.a(1,1e3,500,1,10),q="A1".split(","),F={onLoad:void 0,onIntervalData:void 0,onTrackUpdate:void 0},C={},B={},J={},H=[],W=function(e){Object.assign(F,e);var t=new L({interval:1e3,bufferLength:20,trackKeys:D,fields:A}),n=t.sampler.createSample();return Object.assign(C,n),Object.entries(_).forEach((function(e){var n=Object(c.a)(e,2),r=n[0],i=n[1];return t.addExpression(r,i)})),t.onTrackStart=function(e){B[e.key]=new Array(20),H.push(e),J[e.key]=Object.keys(e.series),e.onUpdate=function(){F.onTrackUpdate&&F.onTrackUpdate(e)}},t.onInterval=function(){return F.onIntervalData&&F.onIntervalData()},t.onLoad=function(){return F.onLoad&&F.onLoad()},function(e,t){t.time=(new Date).getTime();do{t.time+=Object(s.b)(50),t.price=U.next(),t.qty=Math.round(100*Math.random()-50),t.exch=q[Math.round(Math.random()*(q.length-1))]}while(e.preload(t))}(t,C),t.startSampling(),function(e,t){var n=Object(I.a)({},t);setInterval((function(e,t){t.time=(new Date).getTime(),t.price=U.next(),t.qty=Math.round(100*Math.random()-50),t.exch=q[0],e.capture(t)}),50,e,n)}(t,C),function(){t.stopSampling()}},z=n(29),G={border:"thin solid white",margin:0,padding:8,"& table tr td":{paddingBottom:8},"& table tr td:first-of-type":{textAlign:"left"}},N=function(e){var t=e.data,n=Object.keys(t);return i.a.createElement(s.a.row,{css:{flexWrap:"wrap"}},n.map((function(e,n){var r=t[e];return i.a.createElement(s.a.col,{key:e,css:G,grow:!0},i.a.createElement(s.a.table,{cols:["__count","info"].concat(Object(z.a)(r.columns)),items:r.array}))})))},Q=function(){var e=Object(r.useState)(),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=function(){var e={};H.forEach((function(t){var n=new Array(t.length);t.fifo((function(e,t){n[e.ordinal]=t[e.index]})),e[t.key]={array:n,columns:J[t.key]}})),a(e)};return W({onLoad:function(){return e()},onIntervalData:function(){return e()},onTrackUpdate:function(){return e()}})}),[]),n?i.a.createElement(N,{data:n}):null},R=function(){var e={demo2:i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Demo 2 - Load unsampled HF data"),i.a.createElement(Q,null))},t=Object.keys(e);return i.a.createElement(s.a.tabs,{items:t,keyForItem:function(e){return e},elementForItem:function(t){return e[t]}})};o.a.render(i.a.createElement(R,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.447861e9.chunk.js.map