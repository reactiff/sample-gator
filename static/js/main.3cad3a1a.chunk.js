(this["webpackJsonpsample-gator-example"]=this["webpackJsonpsample-gator-example"]||[]).push([[0],{32:function(e,t,n){e.exports=n(59)},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(3),s=n.n(a),o=(n(37),n(38),n(39),n(7)),c=n(11);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=function(e,t,n,r){var i=e.availableLength||0,a=Math.min(i,n),s={},o=e.track,c=e.field;return o.lifo((function(e){s.current=o.array[e.index][c],"undefined"!==typeof s.current&&("undefined"===typeof s.best||s.current<s.best)&&(s.best=s.current)}),r||0,a),s.best},m=function(e,t,n,r){var i=e.availableLength||0,a=Math.min(i,n),s={},o=e.track,c=e.field;return o.lifo((function(e){s.current=o.array[e.index][c],"undefined"!==typeof s.current&&("undefined"===typeof s.best||s.current>s.best)&&(s.best=s.current)}),r||0,a),s.best},p=function(e,t,n,r){var i=e.availableLength||0,a=Math.min(i,n),s=0,o=0,c=e.track,u=e.field;if(c.lifo((function(e){s+=c.array[e.index][u],o++}),r||0,a),0!==o)return s/o},d=function(e,t,n,r,i){var a=e.availableLength||0,s=Math.min(a,n),o=e.track,c=e.field;o.lifo((function(e){i(e,o.array[e.index][c])}),r||0,s)},v=function(e,t,n,r){var i=e.mean(n,r),a=0,s=0;if(e.fn(n,r||0,(function(e,t){a+=Math.pow(t-i,2),s++})),0!==s)return Math.sqrt(a/s)};function y(e,t,n){return function(r,i){if(void 0===i&&(i=0),i>0)throw new Error("offset must be negative");return n(e,t,r,i)}}var g=function(){function e(e){var t=this;this.track=e.track,this.field=e.field,this.min=y(this,e,h),this.max=y(this,e,m),this.mean=y(this,e,p),this.fn=function(e,t,n){return function(r,i,a){if(void 0===i&&(i=0),i>0)throw new Error("offset must be negative");return n(e,t,r,i,a)}}(this,e,d),this.stDev=y(this,e,v),this.value=function(e){if(void 0===e&&(e=0),0!==t.track.getOffsetAdjAvailableLength(e))return t.track.get(e)[t.field]}}return e.createSerie=function(t,n){return new e({field:t,track:n})},l(e,[{key:"availableLength",get:function(){return this.track.getOffsetAdjAvailableLength(0)}}]),e}(),k=function(){function e(e,t){this.key="",this.tags={},this.array=[],this.cursor=0,this.counter=0,this.lastPeriodTime=0,this.serieInstances={},this.series={};var n={length:e};this.sampler=t,this.array=Array.from(n).map(this.sampler.createSample),this.cursor=e?0:-1,this.shouldAdvance=this.sampler.newSamplePredicate,this.createSeries()}var t=e.prototype;return t.getOffsetAdjAvailableLength=function(e){return Math.max(0,Math.min(this.array.length,this.counter+1)-Math.abs(e))},t.get=function(e){return void 0===e&&(e=0),this.array[this.getIndex(e)]},t.getIndex=function(e){void 0===e&&(e=0);var t=this.cursor+e;if(e>0)return t%this.array.length;for(;t<0;)t=this.array.length+t;return t},t.createSeries=function(){var e=[].concat(this.sampler.fields.publicKeys,this.sampler.fields.expressionKeys);this.serieInstances={};var t={},n=this;e.forEach((function(e){t[e]=function(){return n.serieInstances[e]||(n.serieInstances[e]=g.createSerie(e,n)),n.serieInstances[e]}}));var r={get:function(e,t,n){try{return e[t]()}catch(r){throw new Error("Tried to access a non-existent Serie: '"+t+"'")}}};this.series=new Proxy(t,r)},t.nextSample=function(e){var t=this.current[this.sampler.timeKey];if(this.lastAdvanceTime=t,0===this.current.__count){var n=this.get(-1);n.__count&&this.sampler.ffill(this.current,n)}this.counter++,this.cursor++,this.cursor===this.array.length&&(this.cursor=0),Object.assign(this.array[this.cursor],this.sampler.blank),this.array[this.cursor][this.sampler.timeKey]=t+this.sampler.interval},t.fillMissingSamples=function(e){var t=1;if(this.sampler.suppressAutoSampling&&(t=0),this.sampler.interval>0&&this.lastPeriodTime){var n=(e-this.lastPeriodTime)/this.sampler.interval-t;if(n>0)for(var r=0;r<n;r++){var i=this.sampler.interval,a=this.lastPeriodTime+i;this.nextSample("fillMissingSamples"),this.lastPeriodTime=a}}},t.preload=function(e){var t=this.sampler.getSampleTime(e.time);this.fillMissingSamples(t),this.sampler.collect(this,this.current,e,t),this.shouldAdvance(this.current,e,t,this.lastPeriodTime)&&(this.nextSample("preload"),this.lastPeriodTime=t)},t.capture=function(e,t){var n=t||e[this.sampler.timeKey],r=this.sampler.getSampleTime(n);this.lastPeriodTime||(this.lastPeriodTime=r),this.sampler.interval>0&&this.sampler.suppressAutoSampling&&this.fillMissingSamples(r),e.exch,this.key,this.sampler.collect(this,this.current,e,r),0===this.sampler.interval&&(this.nextSample("capture"),this.lastPeriodTime=r),e.exch,this.key,this.onUpdate&&this.onUpdate(),e.exch,this.key},t.lifo=function(e,t,n){void 0===n&&(n=-1);for(var r=Math.abs(t||0),i=n>=0?Math.abs(n):0,a=this.array.length-r,s={index:this.cursor-r,relative:0,ordinal:0},o=this.array.length;o--&&!(r&&s.ordinal>=a)&&!(n>=0&&s.ordinal>=i);)s.index<0&&(s.index=this.array.length-1),e(s,this.array),s.ordinal++,s.index--,s.relative--},t.fifo=function(e,t){void 0===t&&(t=-1);for(var n=this.array.length,r=t>=0?t:n,i={index:0,relative:-(n-1),ordinal:0},a=n;a--&&r--;)i.index=(n+this.cursor-a)%n,e(i,this.array),i.ordinal++,i.relative++},l(e,[{key:"length",get:function(){return this.array.length}},{key:"current",get:function(){return this.array[this.cursor]}}]),e}();function b(e,t,n){e.keys.push(t),"_"===t[0]&&"_"!==t[1]?(e.hidden[t]=!0,e.hiddenKeys.push(t)):e.publicKeys.push(t),"function"===typeof n?e.fn[t]=n:"object"===typeof n?(n.cumulative&&(e.cumulative[t]=!0),e.fn[t]=n.fn,e.fill[t]=n.fill):e.fn[t]=function(){return n}}function x(e,t){var n={keys:[],publicKeys:[],hiddenKeys:[],expressionKeys:[],ffills:[],hidden:{},cumulative:{},fn:{},fill:{}};return Array.isArray(e.fields)?function(e,t){t.fields.forEach((function(t){switch(typeof t){case"string":b(e,t,(function(e){return e[t]}));break;default:b(e,t.name,t)}}))}(n,e):function(e,t){Object.entries(t.fields).forEach((function(t){var n=t[0],r=t[1];b(e,n,r)}))}(n,e),t.forEach((function(e){n.expressionKeys.push(e.name)})),n}function S(e){var t={__count:0};return e.publicKeys.forEach((function(e){t[e]=void 0})),e.expressionKeys.forEach((function(e){t[e]=void 0})),function(){return f({},t)}}var E=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"===typeof e?e.apply(void 0,n):e};function T(e){var t=x(e,[]),n={addExpression:function(e,t){if(n.expressionDict[e])throw new Error("A field with the name '"+e+"' already exists.");n.expressionDict[e]=t,n.expressions.push({name:e,expression:t}),r()},blank:{},bufferLength:e.bufferLength,collect:function(e,t,r,a){(function(e,t,r){e.__count++,n.fields.hiddenKeys.forEach((function(r){n.fields.fn[r](t,e[r],e)})),n.fields.publicKeys.forEach((function(a){if(a===n.timeKey){var s=i(r||t[a]);t[a]=s}var o=n.fields.fn[a](t,e[a],e);"undefined"!==typeof o&&(e[a]=o)}))})(t,r,a),function(e,t){n.expressions.forEach((function(n){var r=n.expression(t.series);"undefined"!==typeof r&&(e[n.name]=r)}))}(t,e)},createSample:S(t),cumulatives:[],expressionDict:{},expressions:[],ffill:function(e,t){e[n.timeKey]=t[n.timeKey]+n.interval,n.fields.ffills.forEach((function(n){e[n.key]=n.fn(e,t[n.key])})),e.__count=1},fields:t,getSampleTime:i,interval:e.interval||0,newSamplePredicate:function(e,t,r,a){var s=i(r);return"undefined"===typeof a||(0===n.interval||s-a>=n.interval)},series:{},suppressAutoSampling:e.suppressAutoSampling,timeKey:E(e.timeKey)||"time",trackKeys:e.trackKeys||[],tracks:[]},r=function(){n.fields=x(e,n.expressions),n.createSample=S(n.fields),n.cumulatives=n.fields.keys.filter((function(e){return n.fields.cumulative[e]}));var t=n.createSample();n.blank=function(e,t){var n=f({},e);return t.forEach((function(e){return delete n[e]})),n}(t,n.cumulatives),n.tracks.forEach((function(e){return e.createSeries()})),n.fields.ffills=n.fields.publicKeys.filter((function(e){return!!n.fields.fill[e]})).map((function(e){return{key:e,fn:n.fields.fill[e]}}))};function i(e){return n.interval?e-e%n.interval:e}return r(),n}function w(e,t){return"undefined"!==typeof e?e:t}var K=function(){function e(e){this.tracks={},this.sampling=!1,this.sampler=T(e)}var t=e.prototype;return t.addExpression=function(e,t){this.sampler.addExpression(e,t)},t.getTracks=function(e){return Object.entries(this.tracks).filter((function(t){return(e||function(){return!0})(t[0],t[1])})).map((function(e){return e[1]}))},t.startSampling=function(){if(!this.sampler.suppressAutoSampling&&!this.sampling){var e=this;this.timer=setInterval((function(){e.sampler.tracks.forEach((function(e){e.nextSample("timer")})),e.onInterval&&e.onInterval()}),this.sampler.interval),this.sampling=!0}},t.stopSampling=function(){clearInterval(this.timer),this.sampling=!1},t.preload=function(e){this.getOrCreateTrack(e).preload(e)},t.capture=function(e,t){this.getOrCreateTrack(e).capture(e)},t.getOrCreateTrack=function(e){var t=this.sampler,n=t.trackKeys.map((function(t){return w(e[t],"")})).join(".");if(!this.tracks[n]){var r=new k(t.bufferLength,t);t.trackKeys.forEach((function(t){r.tags[t]=e[t]})),r.key=n,this.tracks[n]=r,t.tracks.push(r),this.onTrackStart&&this.onTrackStart(r)}return this.tracks[n]},e}(),O=(Math.min,Math.max,Math.abs,K),A=n(26),M={time:{fn:function(e){return e.time}},price:{fn:function(e){return e.price},fill:function(e,t){return t}},qty:{fn:function(e){return e.qty},fill:function(e,t){return t}},exch:{fn:function(e){return e.exch},fill:function(e,t){return t}}},j=["exch"],I={sma3:function(e){return e.price.mean(3)},sma5:function(e){return e.price.mean(5)},sma8:function(e){return e.price.mean(8)},sma10:function(e){return e.price.mean(10)},ema10:function(e){var t="ema".concat(10),n=e.price,r=e[t];if(!(r.availableLength<11)){var i=r.value(-1);i||(i=n.mean(10,-1));return n.value()*(2/11)+i*(1-2/11)}},cross:function(e){return e.ema10.value(0)>e.sma10.value(0)&&e.ema10.value(-1)<e.sma10.value(-1)?1:e.ema10.value(0)<e.sma10.value(0)&&e.ema10.value(-1)>e.sma10.value(-1)?-1:void 0}},P=new Date,L=new A.a(1,1e3,500,10,10),D=["A2"],_={onIntervalData:void 0,onTrackUpdate:void 0},U={},q={},F={},C=[],J=function(e){Object.assign(_,e);var t=new O({interval:1e3,bufferLength:20,trackKeys:j,fields:M}),n=t.sampler.createSample();Object.assign(U,n),Object.entries(I).map((function(e){var n=Object(c.a)(e,2),r=n[0],i=n[1];return t.addExpression(r,i)})),t.onTrackStart=function(e){q[e.key]=new Array(20),C.push(e),F[e.key]=Object.keys(e.series),e.onUpdate=function(){_.onTrackUpdate&&_.onTrackUpdate(e)}},t.onInterval=function(){return _.onIntervalData&&_.onIntervalData()},function(e,t){var n=P.getTime(),r=n%1e3;t.time=n-r-1e3;for(var i=0;i<19;i++)t.time+=1e3,t.price=L.next(),t.qty=Math.round(100*Math.random()-50),t.exch=D[0],e.preload(t)}(t,U),_.onIntervalData&&_.onIntervalData(),t.startSampling(),function e(t,n){n.time=(new Date).getTime(),n.price=L.next(),n.qty=Math.round(100*Math.random()-50);var r=D[0];n.exch=r,t.capture(n);var i=200;setTimeout((function(t,n){e(t,n)}),i,t,n)}(t,U)},B=function(e){var t=e.data,n=Object.keys(t);return i.a.createElement(o.a.row,null,n.map((function(e,n){return i.a.createElement(o.a.table,{key:e,cols:t[e].columns,items:t[e].array})})))},H=function(){var e=Object(r.useState)(),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){J({onTrackUpdate:function(){var e={};C.forEach((function(t){var n=new Array(t.length);t.fifo((function(e,t){n[e.ordinal]=t[e.index]})),e[t.key]={array:n,columns:F[t.key]}})),a(e)}})}),[]),n?i.a.createElement(B,{data:n}):null},z=function(){var e={demo2:i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Demo 2 - Load unsampled HF data"),i.a.createElement(H,null))},t=Object.keys(e);return i.a.createElement(o.a.tabs,{items:t,keyForItem:function(e){return e},elementForItem:function(t){return e[t]}})};s.a.render(i.a.createElement(z,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.3cad3a1a.chunk.js.map